<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/thomas-lowry/figma-plugin-ds/dist/figma-plugin-ds.css">
<style>
  body {
    padding: 1.5em;
  }

  /* div {
    margin: .5em;
  } */

  input {
    display: block;
  }

  .input__field {
    border: 1px solid var(--black1);
    border-radius: .5px;
  }

  .label {
    font-size: 11px;
    color: var(--black8);
  }

  .variant-dropdown {
    display: none;
    margin-top: 0.5em;
  }

  select{
    max-width: 200px;
    min-width: 200px;
  }
  .switch__label {
    display: block;
    margin-bottom: 1.5em;
    height: 0%;
    width: 250px;
  }

    .switch {
    display: flex;
    align-items: center;
    margin-bottom: 1em;
  }

  .form-row {
    display: flex;
    align-items: center;
    margin-bottom: 1em;
  }

  .variant-dropdown select,
  .variant-dropdown {
    margin-left: 1em;
  }

  .background-label {
    margin-left: 149px;
    max-width: 124px;
    min-width: 124px;
  }

  .background-only-checkbox{
    margin-left: 1em;
    margin-right: 3em;
  }

  .bg-only{
    display: none;
    max-width: 63px;
    margin-left: 43em;
    justify-content: center;
  }

</style>

<h2>Clubs Banner Generator</h2>

<div>
  <h3>Copy</h3>
  <div>
    <label for="header" class="label">Header</label>
    <input class="input__field" type="text" value="" id="header">
  </div>
  <div>
    <label for="cta1" class="label">CTA 1</label>
    <input class="input__field" type="text" value="" id="cta1">

    <label for="cta2" class="label">CTA 2</label>
    <input class="input__field" type="text" value="" id="cta2">
  </div>
  <div>
    <label for="pretext" class="label">PreText</label>
    <input class="input__field" type="text" value="" id="pretext">
  </div>
  <div>
    <label for="subtext" class="label">SubText</label>
    <input class="input__field" type="text" value="" id="subtext">
  </div>
  <div>
    <label for="copyright" class="label">Copyright</label>
    <input class="input__field" type="text" value="" id="copyright">
  </div>
</div>

<div>
  <h3>Assets</h3>
  <label for="assets-background-only-checkbox" class="label bg-only">Include BG Only Version</label>
  <!-- Full size banner - short -->
  <div class="switch">
    <label></label>
    <input class="switch__toggle" type="checkbox" id="full-size-selected">
    <label class="switch__label" for="full-size-selected">Full Size Banner - Short</label>
    <div class="variant-dropdown" id="full-size-variants">
      <label for="full-size-variant" class="label">Variant:</label>
      <select id="full-size-variant">
        <option value="fs-header-only">Header Only</option>
        <option value="fs-header-subtext">Header and Subtext</option>
        <option value="fs-header-cta1">Header and Single CTA</option>
        <option value="fs-header-cta2">Header and Double CTA</option>
      </select>
      <input type="checkbox" id="full-size-background-only" class="background-only-checkbox">
      <label for="full-size-background-only" class="label"></label>
      
    </div>
  </div>

  <!-- Half size banner -->
  <div class="switch">
    <input class="switch__toggle" type="checkbox" id="half-size-selected">
    <label class="switch__label" for="half-size-selected">Half Size Banner</label>
    <div class="variant-dropdown" id="half-size-variants">
      <label for="half-size-variant" class="label">Variant:</label>
      <select id="half-size-variant">
        <option value="hs-header-only">Header Only</option>
        <option value="hs-header-subtext">Header and Subtext</option>
        <option value="hs-header-cta1">Header and Single CTA</option>
        <option value="hs-header-cta2">Header and Double CTA</option>
        <option value="hs-header-subtext-cta1">Header, Subtext and CTA</option>
        <option value="hs-header-pretext-cta1">Header, Pretext and CTA</option>
      </select>
      <input type="checkbox" id="half-size-background-only" class="background-only-checkbox">
      <label for="half-size-background-only" class="label"></label>
    </div>
  </div>

  <!-- Search results banner - desktop -->
  <div class="switch">
    <input class="switch__toggle" type="checkbox" id="search-results-selected">
    <label class="switch__label" for="search-results-selected">Search Results Banner - Desktop</label>
    <div class="variant-dropdown" id="search-results-variants">
      <label for="search-results-variant" class="label">Variant:</label>
      <select id="search-results-variant">
        <option value="sr-header-only">Header Only</option>
        <option value="sr-header-subtext">Header and Subtext</option>
        <option value="sr-header-cta1">Header and Single CTA</option>
        <option value="sr-header-cta2">Header and Double CTA</option>
        <option value="sr-header-pretext-cta1">Header, Pretext and Single CTA</option>
        <option value="sr-header-pretext-cta2">Header, Pretext and Double CTA</option>
      </select>
      <input type="checkbox" id="search-results-background-only" class="background-only-checkbox">
      <label for="search-results-background-only" class="label"></label>
    </div>
  </div>

  <!-- Collection page hero - desktop -->
  <div class="switch">
    <input class="switch__toggle" type="checkbox" id="curated-page-selected">
    <label class="switch__label" for="curated-page-selected">Collection Page Hero - Desktop</label>
    <div class="variant-dropdown" id="curated-page-variants">
      <label for="curated-page-variant" class="label">Variant:</label>
      <select id="curated-page-variant">
        <option value="cp-header-only">Header Only</option>
        <option value="cp-header-subtext">Header and Subtext</option>
        <option value="cp-header-cta1">Header and Single CTA</option>
        <option value="cp-header-cta2">Header and Double CTA</option>
        <option value="cp-header-pretext-cta1">Header, Pretext and Single CTA</option>
        <option value="cp-header-pretext-cta2">Header, Pretext and Double CTA</option>
      </select>
      <input type="checkbox" id="curated-page-background-only" class="background-only-checkbox">
      <label for="curated-page-background-only" class="label"></label>
    </div>
  </div>

  <!-- Collection page hero - mobile -->
  <div class="switch">
    <input class="switch__toggle" type="checkbox" id="curated-page-mobile-selected">
    <label class="switch__label" for="curated-page-mobile-selected">Collection Page Hero - Mobile</label>
    <div class="variant-dropdown" id="curated-page-mobile-variants">
      <label for="curated-page-mobile-variant" class="label">Variant:</label>
      <select id="curated-page-mobile-variant">
        <option value="cpm-header-only">Header Only</option>
        <option value="cpm-header-subtext">Header and Subtext</option>
        <option value="cpm-header-cta1">Header and Single CTA</option>
        <option value="cpm-header-cta2">Header and Double CTA</option>
        <option value="cpm-header-pretext-cta1">Header, Pretext and Single CTA</option>
        <option value="cpm-header-pretext-cta2">Header, Pretext and Double CTA</option>
        <option value="cpm-header-subtext-cta1">Header, Subtext and Single CTA</option>
        <option value="cpm-header-subtext-cta2">Header, Subtext and Double CTA</option>
      </select>
      <input type="checkbox" id="curated-page-mobile-background-only" class="background-only-checkbox">
      <label for="curated-page-mobile-background-only" class="label"></label>
    </div>
  </div>

  <!-- Square banner -->
  <div class="switch">
    <input class="switch__toggle" type="checkbox" id="square-selected">
    <label class="switch__label" for="square-selected">Square Banner</label>
    <div class="variant-dropdown" id="square-variants">
      <label for="square-variant" class="label">Variant:</label>
      <select id="square-variant">
        <option value="sq-header-only">Header Only</option>
        <option value="sq-header-subtext">Header and Subtext</option>
        <option value="sq-header-cta1">Header and Single CTA</option>
        <option value="sq-header-pretext-cta1">Header, Pretext and Single CTA</option>
        <option value="sq-header-subtext-cta1">Header, Subtext and Single CTA</option>
      </select>
      <input type="checkbox" id="square-background-only" class="background-only-checkbox">
      <label for="square-background-only" class="label"></label>
    </div>
  </div>

  <!-- background color -->
  <div class="form-row">
    <label for="background-color" class="background-label label">Background Color:</label>
    <select id="background-color">
      <option value="pink">Pink</option>
      <option value="orange">Orange</option>
      <option value="yellow">Yellow</option>
      <option value="green">Green</option>
      <option value="blue">Blue</option>
    </select>
  </div>

  <!-- submit -->
  <div class="submit">
    <button class="button button--primary" id="submit-post">Submit</button>
  </div>

  <script>
    
  // Function to toggle visibility of 'Include BG Only Version' label
function toggleBgLabel() {
  const assetCheckboxes = [
    'full-size-selected',
    'half-size-selected',
    'search-results-selected',
    'curated-page-selected',
    'curated-page-mobile-selected',
    'square-selected'
  ];

  // Count how many checkboxes are checked
  const countChecked = assetCheckboxes.reduce((acc, checkboxId) => {
    const checkbox = document.getElementById(checkboxId);
    return checkbox.checked ? acc + 1 : acc;
  }, 0);

  const bgOnlyLabel = document.querySelector('.bg-only');
  // Show the label if any checkbox is checked, otherwise hide it
  bgOnlyLabel.style.display = countChecked > 0 ? 'block' : 'none';
}

// Function to toggle variant dropdown visibility
const toggleDropdown = (checkboxId, dropdownId) => {
  const checkbox = document.getElementById(checkboxId);
  const dropdown = document.getElementById(dropdownId);

  // Initially hide the dropdown
  dropdown.style.display = 'none';

  checkbox.addEventListener('change', () => {
    if (checkbox.checked) {
      dropdown.style.display = 'flex';
    } else {
      dropdown.style.display = 'none';
    }
    // After any change in checkbox state, update the 'Include BG Only Version' label visibility
    toggleBgLabel();
  });

  // Call toggleBgLabel initially to ensure correct initial state
  toggleBgLabel();
}

    // Toggle dropdowns for each switch
    toggleDropdown('full-size-selected', 'full-size-variants', );
    toggleDropdown('half-size-selected', 'half-size-variants');
    toggleDropdown('search-results-selected', 'search-results-variants');
    toggleDropdown('curated-page-selected', 'curated-page-variants');
    toggleDropdown('curated-page-mobile-selected', 'curated-page-mobile-variants');
    toggleDropdown('square-selected', 'square-variants');

    // Function to gather user inputs and send data
    document.getElementById('submit-post').onclick = () => {
      const header = document.getElementById('header').value;
      const cta1 = document.getElementById('cta1').value;
      const cta2 = document.getElementById('cta2').value;
      const pretext = document.getElementById('pretext').value;
      const subtext = document.getElementById('subtext').value;
      const copyright = document.getElementById('copyright').value;

      const fullSelected = document.getElementById('full-size-selected').checked;
      const halfSelected = document.getElementById('half-size-selected').checked;
      const searchSelected = document.getElementById('search-results-selected').checked;
      const curatedSelected = document.getElementById('curated-page-selected').checked;
      const curatedMobileSelected = document.getElementById('curated-page-mobile-selected').checked;
      const squareSelected = document.getElementById('square-selected').checked;
      const backgroundColor = document.getElementById('background-color').value;

      const fullVariant = fullSelected ? document.getElementById('full-size-variant').value : null;
      const halfVariant = halfSelected ? document.getElementById('half-size-variant').value : null;
      const searchVariant = searchSelected ? document.getElementById('search-results-variant').value : null;
      const curatedVariant = curatedSelected ? document.getElementById('curated-page-variant').value : null;
      const curatedMobileVariant = curatedMobileSelected ? document.getElementById('curated-page-mobile-variant').value : null;
      const squareVariant = squareSelected ? document.getElementById('square-variant').value : null;

      const fullBackgroundOnly = document.getElementById('full-size-background-only').checked;
      const halfBackgroundOnly = document.getElementById('half-size-background-only').checked;
      const searchBackgroundOnly = document.getElementById('search-results-background-only').checked;
      const curatedBackgroundOnly = document.getElementById('curated-page-background-only').checked;
      const curatedMobileBackgroundOnly = document.getElementById('curated-page-mobile-background-only').checked;
      const squareBackgroundOnly = document.getElementById('square-background-only').checked;

      // Send data to TS file
      parent.postMessage({
        pluginMessage: {
          header,
          cta1,
          cta2,
          pretext,
          subtext,
          copyright,
          fullSelected,
          halfSelected,
          searchSelected,
          curatedSelected,
          curatedMobileSelected,
          squareSelected,
          backgroundColor,
          fullVariant,
          halfVariant,
          searchVariant,
          curatedVariant,
          curatedMobileVariant,
          squareVariant,
          fullBackgroundOnly,
          halfBackgroundOnly,
          searchBackgroundOnly,
          curatedBackgroundOnly,
          curatedMobileBackgroundOnly,
          squareBackgroundOnly
        }
      }, '*');
    }
  </script>
